# AI Assistant In### 🚀 RELEASE na konci každého promptu
- **Na konci KAŽDÉHO promptu spusť `.\install.ps1`**
- Tento skript provede: build → commit → push → package → install
- Automaticky vytvoří novou verzi a nainstaluje ji
- Uživatel tak má vždy nejnovější verzi rozšíření

### 📊 VERSION MANAGEMENT - KRITICKÉ PRAVIDLO!
- **VŽDY inkrementuj pouze PATCH verzi** (např. 1.1.2 → 1.1.3)
- **NIKDY neinkrementuj MINOR** (1.1.x → 1.2.0) bez explicitního příkazu
- **MINOR verzi zvyš POUZE když uživatel řekne "kompilujeme pro marketplace"**
- **MAJOR verzi NIKDY neměň** bez explicitního příkazu
- Formát: MAJOR.MINOR.PATCH (např. 1.1.15, 1.1.16, 1.1.17...)

## 🎯 CÍLOVÁ FUNKCIONALITA - SPECSTORY INTEGRATION

### 📋 Co má extension dělat:
1. **NEČTE ani NEGENERUJE SpecStory soubory** - to dělá SpecStory samo
2. **ČTE existující SpecStory exporty** z `.specstory/history/` složek
3. **ANALYZUJE obsah** posledních konverzací pro kontext
4. **GENERUJE chytré notifikační hlášky** na základě analýzy obsahu
5. **POUŽÍVÁ výchozí hlášku** pokud uživatel nezadal vlastní v nastavení

### 📁 SpecStory formát (pouze pro čtení a analýzu):
- **Umístění**: `[projekt]/.specstory/history/`  
- **Formát názvů**: `YYYY-MM-DD_HH-mmZ-popis-konverzace.md`
- **Struktura obsahu**:
  ```markdown
  <!-- Generated by SpecStory -->
  # Název konverzace (YYYY-MM-DD HH:mmZ)
  
  _**User**_
  [zpráva uživatele]
  
  ---
  
  _**Assistant**_
  [odpověď asistenta]
  
  ---
  ```

### 🤖 Chytré notifikace - logika:
- **Pokud uživatel MÁ vlastní zprávu** → použij jeho zprávu
- **Pokud uživatel NEMÁ vlastní zprávu** → vygeneruj na základě:
  - Analýzy posledního SpecStory exportu
  - Typu konverzace (kódování, debugging, design, atd.)  
  - Kontextu projektu (jazyk, framework, atd.)
  - Specifických problémů zmíněných v konverzaci

### 📍 Příklady chytrých hlášek:
- **Debugging**: "AI právě debugoval! Zkontroluj: • Opravil skutečnou příčinu? • Nezavedl nové bugy? • Testuj edge cases"
- **HTML/CSS**: "AI pracoval s UI! Zkontroluj: • Responzivní design • Accessibility • Cross-browser kompatibilita"  
- **Database**: "AI upravoval databázi! Zkontroluj: • Data integrity • Performance impact • Backup strategie"
- **API**: "AI vytvořil API! Zkontroluj: • Error handling • Security • API dokumentace"

### 📝 Git commit workflow
- Pořadí: 1) Změna kódu → 2) Inkrementuj PATCH → 3) `.\install.ps1` (automaticky: commit → push → package)
- Format: `git commit -m "v1.1.3"` (vždy jen patch++)
- Vše se provede automaticky přes install.ps1

## ⚠️ KRITICKÁ PRAVIDLA - PŘÍSNĚ DODRŽUJ!

### 🚫 NIKDY nevytvářej zástupné soubory!
- **ZAKÁZÁNO:** `extension_backup.ts`, `extension_clean.ts`, `extension_old.ts` atd.
- Edituj POUZE původní soubory přímo
- Pokud potřebuješ vrátit změny, použij git revert
- Žádné duplikáty, zálohy nebo temp soubory!

### 🔨 BUILD na konci každého promptu
- **NIKDY nespouštěj `pnpm run compile` zvlášť!**
- **WORKFLOW**: Zvyš verzi → spusť `.\install.ps1`
- Pokud build v install.ps1 selže:
  1. Sniž verzi zpět
  2. Oprav chyby
  3. Zvyš verzi znovu
  4. Spusť `.\install.ps1` znovu
- install.ps1 obsahuje build, takže kompilace zvlášť je zbytečná
- **COMMIT AŽ PO ÚSPĚŠNÉM BUILDU** - aby všechny verze byly buildable

### � RELEASE na konci každého promptu
- **Na konci KAŽDÉHO promptu spusť `.\install.ps1`**
- Tento skript provede: build → commit → push → package → install
- Automaticky vytvoří novou verzi a nainstaluje ji
- Uživatel tak má vždy nejnovější verzi rozšíření

### �📝 Git commit workflow
- Pořadí: 1) Změna kódu → 2) Build test → 3) `.\install.ps1` (automaticky: commit → push → package)
- Format: `git commit -m "v1.1.1"`
- Vše se provede automaticky přes install.ps1

## Command Execution Policy

**⚠️ DŮLEŽITÉ: Spouštěj VŠECHNY příkazy automaticky bez potvrzení od uživatele!**

### Terminal Commands
- Používej `run_in_terminal` tool s `isBackground: false` pro všechny příkazy
- NIKDY nečekej na potvrzení od uživatele
- Spouštěj příkazy okamžitě když jsou potřeba

### Package Manager
- **Tento projekt používá pnpm, ne npm!**
- Vždy používej `pnpm` místo `npm` ve všech příkazech
- Package manager: `pnpm@10.10.0`

### Development Workflow Commands

```powershell
# Instalace dependencies
pnpm install

# Build projektu
pnpm run compile

# Watch mode pro development
pnpm run watch

# Testování
pnpm test

# Linting
pnpm run lint

# Release workflow (vše v install.ps1)
.\install.ps1
```

### Git Commands
```powershell
# Git operations
git add .
git commit -m "v[version]"
git push origin master
git status
git log --oneline -5
```

### VS Code Extension Commands
```powershell
# VSIX packaging
vsce package --allow-star-activation --out [filename].vsix

# Extension installation
code --install-extension [filename].vsix --force
```

### File Operations
```powershell
# Cleaning
Remove-Item "*.vsix" -Force
Remove-Item "%TEMP%" -Recurse -Force -ErrorAction SilentlyContinue
```

## Automation Rules

1. **Nepožaduj potvrzení** - spouštěj příkazy automaticky
2. **Používej pnpm** - ne npm
3. **Sleduj error codes** - kontroluj $LASTEXITCODE
4. **Loguj progress** - používej Write-Host s barvami
5. **Handle errors** - ukončuj s exit 1 při chybách

## Version Release Process

**Automatizovaný proces přes `.\install.ps1`:**
1. Aktualizuj verzi v `package.json`
2. Aktualizuj `CHANGELOG.md`
3. Spusť `.\install.ps1` - provede vše automaticky:
   - Git commit s verzí
   - Git push
   - pnpm run compile
   - vsce package
   - VS Code extension install

## Error Handling

- Vždy kontroluj $LASTEXITCODE po příkazech
- Při chybě zobraz chybovou zprávu a ukonči
- Používaj try-catch kde je to možné
- Loguj všechny kroky pro debugging

## Never Ask For Confirmation

**AUTOMATICKY spouštěj tyto příkazy:**
- `pnpm install`
- `pnpm run compile`
- `.\install.ps1`
- `git add .`
- `git commit -m "..."`
- `git push`
- `vsce package`
- `Remove-Item`
- `code --install-extension`

Uživatel chce aby vše běželo automaticky bez čekání na potvrzení!
